<!-- lesson 47: Practice. -->
@let emailTaken = emailRef.hasError("emailTaken");

<h1>Создание пользователя</h1>
<form #userForm="ngForm" (ngSubmit)="onSubmit(userForm)">
  <div>
    <label for="name">Имя<span>*</span>:</label>
    <input
      type="text"
      name="name"
      id="name"
      placeholder="Введите имя"
      [(ngModel)]="user.name"
      required
      #nameRef="ngModel"
    />
    @if (checkFieldStatus(nameRef)) {
      <p class="error">Имя обязательно</p>
    }
  </div>

  <div>
    <label for="lastName">Фамилия<span>*</span>:</label>
    <input
      type="text"
      name="lastName"
      id="lastName"
      placeholder="Введите фамилию"
      [(ngModel)]="user.lastName"
      required
      #lastNameRef="ngModel"
    />
    @if (checkFieldStatus(lastNameRef)) {
      <p class="error">Фамилия обязательна</p>
    }
  </div>

  <div>
    <label for="email">Email<span>*</span>:</label>
    <input
      type="email"
      name="email"
      id="email"
      placeholder="Введите email"
      [(ngModel)]="user.email"
      required
      email
      #emailRef="ngModel"
    />
    @if (checkFieldStatus(emailRef) && !emailTaken) {
      <p class="error">Email заполнен неверно</p>
    }
    @if (emailTaken) {
      <p class="error">Этот email уже используется</p>
    }
  </div>

  <div>
    <label for="default">Пол:</label>
    <div>
      <label
        ><input
          type="radio"
          name="gender"
          value="male"
          [(ngModel)]="user.gender"
        />Мужской</label
      >
      <label
        ><input
          type="radio"
          name="gender"
          value="female"
          [(ngModel)]="user.gender"
        />Женский</label
      >
    </div>
  </div>

  <div>
    <label class="default">Страна:</label>
    <select name="country" [(ngModel)]="user.country">
      <option value="ru">Россия</option>
      <option value="us">США</option>
      <option value="de">Германия</option>
    </select>
  </div>

  <div>
    <label for="comment">Комментарий:</label>
    <textarea
      name="comment"
      id="comment"
      placeholder="Введите комментарий"
      [(ngModel)]="user.comment"
    ></textarea>
  </div>

  <div>
    <label>
      <input
        type="checkbox"
        name="agree"
        [(ngModel)]="user.agree"
        required
        #agreeRef="ngModel"
      />Согласен с условиями использования.<span>*</span>
    </label>
    @if (agreeRef.invalid) {
      <p class="error">Необходимо подтвердить согласие.</p>
    }
  </div>
  <div class="buttons">
    <button [disabled]="!enableSubmit()">Создать</button>
    <button type="button" (click)="userForm.resetForm(initialUser)">
      Сбросить
    </button>
  </div>
</form>

<!-- lesson 46 -->
<!-- <input type="text" name="username" id="username" [(ngModel)]="username" /> -->
<!-- <input
  type="text"
  name="username"
  id="username"
  ngModel
  #exampleInput="ngModel"
  minlength="3"
/> -->

<!-- <p>{{ exampleInput.value }}</p> -->
<!-- <p>dirty: {{ exampleInput.dirty }}</p> -->

<!-- <form #exampleForm="ngForm" (ngSubmit)="onSubmit(exampleForm)">
  <label for="username">Имя пользователя:</label>
  <input
    type="text"
    id="username"
    name="username"
    ngModel
    minlength="3"
    #exampleInput="ngModel"
  />
  <button type="submit">Отправить</button>
  <!-- <button type="reset" (onReset)="exampleForm.onReset()">Сбросить</button>
  <!-- <button
    type="button"
    (click)="exampleForm.resetForm({ username: 'Измененное значение' })"
  >
    Сбросить
  </button>
</form>
<p>Форма отправлена: {{ exampleForm.submitted }}</p> -->

<!-- lesson 43 -->
<!-- <app-child name="Vasya"></app-child> -->
<!-- <app-child></app-child>
<app-child><p>Какие-то данные</p></app-child> -->
<!-- lesson 31 -->
<!-- <h1>Текущее значение: {{ exampleObservable$ | async }}</h1> -->

<!-- @if (exampleObservable$ | async; as data) {
  <h1>Предыдущее значение: {{ data.previousValue }}</h1>
  <h1>Текущее значение: {{ data.currentValue }}</h1>
  <h1>Следующее значение: {{ data.nextValue }}</h1>

  <app-child [currentValue]="data.currentValue"></app-child>
}

<app-child
  [currentValue]="(exampleObservable$ | async).currentValue"
></app-child>

<h1>{{ examplePromise$ | async }}</h1>
<app-child [currentValue]="examplePromise$ | async"></app-child> -->

<!-- lesson 32 -->
<!-- <h1>{{ title }}</h1> -->

<!-- @if (interval$ | async; as number) {
  <app-child [number]="number"></app-child>
} -->

<!-- <app-child [number]="15"></app-child> -->

<!-- <button (click)="handleClick()">Click</button> -->

<!-- <h2>{{ interval$ | async }}</h2> -->

<!-- <h2>{{ signal() }}</h2> -->

<!-- lesson 36 -->
<!-- <app-child name="Вася"></app-child> -->
<!-- <app-child [name]="name"></app-child> -->

<!-- lesson 37 -->
<!-- @if (users) {
  <p>Первый список</p>
  <ul>
    @for (user of users; track $index) {
      <li>{{ user.name }}</li>
    }
  </ul>
}

<hr />

@if (users$ | async; as users) {
  <p>Второй список</p>
  <ul>
    @for (user of users; track $index) {
      <li>{{ user.name }}</li>
    }
  </ul>
}

<app-child></app-child> -->

<!-- lesson 39 -->
<!-- @let title = data.one.two.three.title;

<h1>{{ title }}</h1> -->

<!-- @if ((asyncData$ | async)?.one?.two?.three?.title; as title) {
  <h1>{{ title }}</h1>
}

@let asyncTitle = (asyncData$ | async)?.one?.two?.three?.title;
<h1>{{ asyncTitle }}</h1> -->

<!-- lesson 40 -->
<!-- @if (users$ | async; as users) {
  <p>Список:</p>
  <ul>
    @for (user of users; track $index) {
      <li>{{ user.name }}</li>
    }
  </ul>
}
<app-child></app-child> -->
